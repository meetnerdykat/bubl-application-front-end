{"ast":null,"code":"import axios from 'axios';\nimport { schools, bubls } from '../data';\nexport const LOGIN_START = \"LOGIN_START\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport const login = credentials => dispatch => {\n  dispatch({\n    type: LOGIN_START\n  });\n  return axios.post('https://bublapplication.herokuapp.com/students/login', credentials).then(res => {\n    localStorage.setItem('token', res.data.token);\n    console.log(res);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data.id\n    });\n  }).catch(err => {\n    console.log(\"login error:\", err); // if (err.response && err.response.status === 403) {\n\n    localStorage.removeItem(\"token\"); // }\n\n    dispatch({\n      type: LOGIN_FAILURE\n    });\n  });\n};\nexport const REGISTER_START = \"REGISTER_START\";\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"REGISTER_FAILURE\";\nexport const register = newUser => dispatch => {\n  dispatch({\n    type: REGISTER_START\n  });\n  console.log(newUser);\n  return axios.post('https://bublapplication.herokuapp.com/students/register', newUser).then(res => {\n    console.log(res);\n    dispatch({\n      type: REGISTER_SUCCESS\n    });\n  }).catch(err => {\n    console.log(\"login error:\", err);\n    dispatch({\n      type: REGISTER_FAILURE\n    });\n    return false;\n  });\n};\nexport const FETCH_START = \"FETCH_START\";\nexport const FETCH_SUCCESS = \"FETCH_SUCCESS\";\nexport const FETCH_FAILURE = \"FETCH_FAILURE\";\nexport const getBubls = id => dispatch => {\n  //   dispatch({type: FETCH_SUCCESS, payload: bubls})\n  dispatch({\n    type: FETCH_START\n  });\n  axios.get('https://bublapplication.herokuapp.com/threads', {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: FETCH_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: FETCH_FAILURE,\n      payload: err\n    });\n  });\n};\nexport const FETCH_COMMENTS_START = \"FETCH_COMMENTS_START\";\nexport const FETCH_COMMENTS_SUCCESS = \"FETCH_COMMENTS_SUCCESS\";\nexport const FETCH_COMMENTS_FAILURE = \"FETCH_COMMENTS_FAILURE\";\nexport const getComments = id => dispatch => {\n  dispatch({\n    type: FETCH_COMMENTS_START\n  });\n  axios.get(\"https://bublapplication.herokuapp.com/threads/comments/\".concat(id), {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: FETCH_COMMENTS_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: FETCH_COMMENTS_FAILURE,\n      payload: err\n    });\n  });\n};\nexport const POST_START = \"POST_START\";\nexport const POST_SUCCESS = \"POST_SUCCESS\";\nexport const POST_FAILURE = \"POST_FAILURE\";\nexport const postBubl = (bublmessage, id) => dispatch => {\n  // badly written, but it fakes it.\n  //   let specificBubl = bubls.find(b => b.id == id)\n  //   const specificBublIndex = bubls.findIndex(b => b.id == id);\n  //   specificBubl.messages.push(bublmessage)\n  //   let newBubls = [\n  //     ...bubls.slice(0, specificBublIndex),\n  //     specificBubl,\n  //     ...bubls.slice(specificBublIndex + 1)\n  //   ];\n  // dispatch({type: POST_SUCCESS, payload: newBubls});\n  dispatch({\n    type: POST_START\n  });\n  axios.post(\"https://bublapplication.herokuapp.com/comment\", bublmessage, {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: POST_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: POST_FAILURE,\n      payload: err\n    });\n  });\n};\nexport const FETCH_SCHOOL_START = \"FETCH_SCHOOL_START\";\nexport const FETCH_SCHOOL_SUCCESS = \"FETCH_SCHOOL_SUCCESS\";\nexport const getSchools = () => dispatch => {\n  dispatch({\n    type: FETCH_SCHOOL_START\n  });\n  axios.get(\"https://bublapplication.herokuapp.com/students\", {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  }).then(res => {\n    dispatch({\n      type: FETCH_SCHOOL_SUCCESS,\n      payload: res.data\n    });\n  });\n};\nexport const FILTER_BUBLS = \"FILTER_BUBLS\";\nexport const filterByHashTag = (allBubls, hashtag) => dispatch => {\n  dispatch({\n    type: FILTER_BUBLS,\n    payload: {\n      allBubls,\n      hashtag\n    }\n  });\n};","map":{"version":3,"sources":["/Users/nerdykat/Projects/LAMBDA_SCHOOL/Front-End/bubl/src/actions/index.js"],"names":["axios","schools","bubls","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","login","credentials","dispatch","type","post","then","res","localStorage","setItem","data","token","console","log","payload","id","catch","err","removeItem","REGISTER_START","REGISTER_SUCCESS","REGISTER_FAILURE","register","newUser","FETCH_START","FETCH_SUCCESS","FETCH_FAILURE","getBubls","get","headers","Authorization","getItem","FETCH_COMMENTS_START","FETCH_COMMENTS_SUCCESS","FETCH_COMMENTS_FAILURE","getComments","POST_START","POST_SUCCESS","POST_FAILURE","postBubl","bublmessage","FETCH_SCHOOL_START","FETCH_SCHOOL_SUCCESS","getSchools","FILTER_BUBLS","filterByHashTag","allBubls","hashtag"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {schools, bubls} from '../data';\n\nexport const LOGIN_START = \"LOGIN_START\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\n\nexport const login = credentials => dispatch => {\n   dispatch({type: LOGIN_START});\n\n   return axios.post('https://bublapplication.herokuapp.com/students/login', credentials)\n      .then(res => {\n         localStorage.setItem('token', res.data.token);\n        console.log(res)\n         dispatch({type: LOGIN_SUCCESS, payload: res.data.id});\n      })\n      .catch(err => {\n         console.log(\"login error:\", err);\n        // if (err.response && err.response.status === 403) {\n          localStorage.removeItem(\"token\");\n        // }\n      dispatch({ type: LOGIN_FAILURE });\n      })\n}\n\nexport const REGISTER_START = \"REGISTER_START\";\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"REGISTER_FAILURE\";\n\nexport const register = (newUser) => dispatch => {\n  dispatch({type: REGISTER_START});\n  console.log(newUser);  \n  \n  return axios.post('https://bublapplication.herokuapp.com/students/register', newUser)\n  .then(res => {\n    console.log(res)\n    dispatch({type: REGISTER_SUCCESS});\n  })\n  .catch(err => {\n        console.log(\"login error:\", err);\n        dispatch({ type: REGISTER_FAILURE });\n        return false\n      })\n\n}\n\nexport const FETCH_START = \"FETCH_START\";\nexport const FETCH_SUCCESS = \"FETCH_SUCCESS\";\nexport const FETCH_FAILURE = \"FETCH_FAILURE\";\n\nexport const getBubls = id => dispatch => {\n//   dispatch({type: FETCH_SUCCESS, payload: bubls})\n\n   dispatch({type: FETCH_START});\n   axios.get('https://bublapplication.herokuapp.com/threads', {\n      headers: { Authorization: localStorage.getItem(\"token\") }})\n      .then(res => {\n         console.log(res);\n         dispatch({type: FETCH_SUCCESS, payload: res.data})\n      })\n      .catch(err => {\n         dispatch({type: FETCH_FAILURE, payload: err})\n      })\n}\n\nexport const FETCH_COMMENTS_START = \"FETCH_COMMENTS_START\";\nexport const FETCH_COMMENTS_SUCCESS = \"FETCH_COMMENTS_SUCCESS\";\nexport const FETCH_COMMENTS_FAILURE = \"FETCH_COMMENTS_FAILURE\";\n\nexport const getComments = id => dispatch => {\n\n   dispatch({type: FETCH_COMMENTS_START});\n   axios.get(`https://bublapplication.herokuapp.com/threads/comments/${id}`, {\n      headers: { Authorization: localStorage.getItem(\"token\") }})\n      .then(res => {\n         console.log(res);\n         dispatch({type: FETCH_COMMENTS_SUCCESS, payload: res.data})\n      })\n      .catch(err => {\n         dispatch({type: FETCH_COMMENTS_FAILURE, payload: err})\n      })\n}\n\nexport const POST_START = \"POST_START\";\nexport const POST_SUCCESS = \"POST_SUCCESS\";\nexport const POST_FAILURE = \"POST_FAILURE\";\n\nexport const postBubl = (bublmessage, id) => dispatch => {\n\n  // badly written, but it fakes it.\n\n//   let specificBubl = bubls.find(b => b.id == id)\n//   const specificBublIndex = bubls.findIndex(b => b.id == id);\n\n//   specificBubl.messages.push(bublmessage)\n\n//   let newBubls = [\n//     ...bubls.slice(0, specificBublIndex),\n//     specificBubl,\n//     ...bubls.slice(specificBublIndex + 1)\n//   ];\n  \n   // dispatch({type: POST_SUCCESS, payload: newBubls});\n\n   dispatch({type: POST_START});\n   axios.post(`https://bublapplication.herokuapp.com/comment`, bublmessage, {\n    headers: { Authorization: localStorage.getItem(\"token\") }\n  })\n      .then(res => {\n        console.log(res);\n        \n         dispatch({type: POST_SUCCESS, payload: res.data})\n      })\n      .catch(err => {\n         dispatch({type: POST_FAILURE, payload: err})\n      })\n}\n\nexport const FETCH_SCHOOL_START = \"FETCH_SCHOOL_START\";\nexport const FETCH_SCHOOL_SUCCESS = \"FETCH_SCHOOL_SUCCESS\";\n\nexport const getSchools = () => dispatch => {\n  dispatch({ type: FETCH_SCHOOL_START });\n\n  axios\n  .get(\"https://bublapplication.herokuapp.com/students\", {\n    headers: { Authorization: localStorage.getItem(\"token\") }\n  })\n    .then(res => {    \n      dispatch({type: FETCH_SCHOOL_SUCCESS, payload: res.data})\n    })\n}\n\nexport const FILTER_BUBLS = \"FILTER_BUBLS\";\n\nexport const filterByHashTag = (allBubls, hashtag) => dispatch => {\n  dispatch({ type: FILTER_BUBLS, payload: {allBubls, hashtag} });\n}"]},"metadata":{},"sourceType":"module"}